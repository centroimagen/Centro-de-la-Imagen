!function($,t,o,r){"use strict";var e;function p(t){$(".ptb-promt-box .show-login").show(),$(".ptb-promt-box .show-error").hide(),"error"==t?0==$(".ptb-promt-box .prompt-error").length&&$(".ptb-promt-box .prompt-msg").after('<p class="prompt-error">'+ptb_upgrader.invalid_login+"</p>"):$(".ptb-promt-box .prompt-error").remove(),$(".ptb-promt-box").addClass("update-plugin"),$(".ptb_promt_overlay,.ptb-promt-box").fadeIn(500)}function a(){$(".ptb_promt_overlay,.ptb-promt-box").fadeOut(500,function(){var t=$(".ptb-promt-box"),o=t.find("iframe");0<o.length&&o.remove(),t.removeClass("show-changelog")})}function n(t){"error"==t?(t="error",function(t){$(".ptb_promt_overlay, .ptb-promt-box").delay(900).fadeIn(500),$(".ptb-promt-box .show-error").show(),$(".ptb-promt-box .show-error p").remove(),$(".ptb-promt-box .error-msg").after('<p class="prompt-error">'+t+"</p>"),$(".ptb-promt-box .show-login").hide()}()):t="done",$(".ptb_alert").removeClass("busy").addClass(t).delay(800).fadeOut(800,function(){$(this).removeClass(t)})}$(function(){$(".themify-ptb-upgrade-plugin").on("click",function(t){t.preventDefault(),e=$(this),p()}),$(".themify-ptb-upgrade-login").on("click",function(t){var o,r;t.preventDefault(),$(".ptb-promt-box").hasClass("update-plugin")&&(o=(t=$(this)).parent().parent().find(".username").val(),r=t.parent().parent().find(".password").val(),t=t.closest(".notifications").find(".update").hasClass("login"),""!=o&&""!=r?(a(),function(){$(".ptb_alert").addClass("busy").fadeIn(800)}(),$.post(ajaxurl,{action:"themify_ptb_validate_login",type:"plugin",login:t,username:o,password:r,nicename_short:e.data("nicename_short"),update_type:e.data("update_type")},function(t){"true"==(t=$.trim(t))?(n(),$("#ptb_update_form").append('<input type="hidden" name="plugin" value="'+e.data("plugin")+'" /><input type="hidden" name="package_url" value="'+e.data("package_url")+'" /><input type="hidden" name="nicename_short" value="'+e.data("nicename_short")+'" />').submit()):(n("error"),p("error"))})):(n("error"),p("error")))}),$(".ptb_promt_overlay").on("click",function(){a()}),$(".ptb_changelogs").on("click",function(t){t.preventDefault();t=$(this).data("changelog");$(".ptb-promt-box .show-login,.ptb-promt-box .show-error").hide(),$(".ptb_alert").addClass("busy").fadeIn(300),$(".ptb_promt_overlay,.ptb-promt-box").fadeIn(300),$('<iframe src="'+t+'" />').on("load",function(){$(".ptb_alert").removeClass("busy").fadeOut(300)}).prependTo(".ptb-promt-box"),$(".ptb-promt-box").addClass("show-changelog")})})}(jQuery,window,document);