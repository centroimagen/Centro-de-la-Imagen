var PTB_Common;($=>{"use strict";PTB_Common={el:{loader:null,icon_picker:null,search:null,search_css:null},get_loader(){return null===this.el.loader&&(this.el.loader=document.getElementsByClassName("ptb_alert")[0],this.el.loader||(this.el.loader=document.createElement("div"),this.el.loader.className="ptb_alert",document.body.appendChild(this.el.loader))),this.el.loader},show_loader(){this.get_loader().classList.add("busy"),this.get_loader().style.display="block"},hide_loader(){this.get_loader().classList.remove("busy"),this.get_loader().style.display="none"},load_lightbox(e){if(void 0===$.fn.magnificPopup){const t=document.createElement("link");t.rel="stylesheet",t.href=ptbCommonVars.lb_css,document.body.appendChild(t),$.getScript(ptbCommonVars.lb_js,()=>{e()})}else e()},show_icon_picker(t){if(null===this.el.icon_picker)this.show_loader(),$.ajax({url:ptbCommonVars.ajaxurl,type:"POST",data:{action:"ptb_get_icons_list"},success:e=>{document.body.insertAdjacentHTML("beforeend",e),this.el.icon_picker=document.getElementById("ptb_icon_picker_wrap"),this.el.search=this.el.icon_picker.querySelector(".ptb_icon_search"),this.el.search_css=this.el.search.nextElementSibling,this.hide_loader(),this.show_icon_picker(t)}});else{const n=this,s=t.closest("[data-ptb_icon_picker_container]"),c=function(e){if(e.preventDefault(),e.target&&"A"===e.target.tagName){const t=e.target.dataset.cat+"-"+e.target.dataset.icon,i=s.querySelectorAll("[data-ptb_icon_picker_value]"),o=s.querySelectorAll("[data-ptb_icon_picker_preview]");if(i)for(let e=0;e<i.length;e++)i[e].value=t;if(o)for(let e=0;e<o.length;e++)o[e].innerHTML=n.get_icon(t);$.magnificPopup.close(),n.el.icon_picker.removeEventListener("click",c),n.el.search.removeEventListener("keyup",this.search)}};this.el.icon_picker.style.display="block",$.magnificPopup.open({items:{src:this.el.icon_picker,type:"inline"},callbacks:{open:function(){document.body.classList.add("ptb_icon_picker_open")},close:function(){document.body.classList.remove("ptb_icon_picker_open")}}}),this.el.icon_picker.addEventListener("click",c),this.el.search.addEventListener("keyup",this.search),this.el.icon_picker.parentElement.classList.add("ptb_scrollbar")}},search(){const e=this.value.trim();if(e){const t=`div#ptb_icon_picker_wrap section a:not([data-icon*="${e}"]) {
					display: none;
				}
				/* hide empty icon groups */
				div#ptb_icon_picker_wrap section:not(:has(a[data-icon*="${e}"])) {
					display: none;
				}
				`;PTB_Common.el.search_css.innerHTML=t}else PTB_Common.el.search_css.innerHTML=""},get_icon(e){return'<svg aria-hidden="true" class="ptb_fa ptb_'+e+'"><use href="#ptb-'+e+'"></use></svg>'},init_icon_picker(){$("body").on("click","[data-ptb_icon_picker]",function(e){e.preventDefault(),PTB_Common.load_lightbox(()=>{PTB_Common.show_icon_picker(this)})})}},"complete"===document.readyState?PTB_Common.init_icon_picker():window.addEventListener("load",PTB_Common.init_icon_picker,{once:!0,passive:!0})})(jQuery);