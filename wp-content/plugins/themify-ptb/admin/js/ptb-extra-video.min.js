!function($){"use strict";$(document).on("ptb_add_metabox_video",function(e){return{}}).on("ptb_post_cmb_video_body_handle",function(d){var i=d.cmbItemBody.find(".ptb_cmb_options_wrapper");if(0===i.length)return!1;var n=i.children().first().clone();function o(e){e.preventDefault(),e.data.item.hide("blind",500,function(){$(this).remove()})}i.sortable({placeholder:"ui-state-highlight",handle:".ptb_cmb_option_sort"}),d.cmbItemBody.find(".ptb_cmb_option_add").click({wrapper:i},function(e){var t=n.clone();t.appendTo(i).hide().show("blind",500),t.find('[name^="'+d.id+'"]').val(""),t.find(".ptb_post_cmb_image").removeClass("ptb_uploaded"),t.find("."+d.id+"_remove").click({item:t},o),e.data.wrapper.sortable("refresh")}),i.children().each(function(){var e=$(this);e.find("."+d.id+"_remove").click({item:e},o)}),$(".ptb_post_cmb_item_video").on("click","."+d.id+"_option_wrapper .ptb_post_cmb_image",function(e){e.preventDefault();var n=$(this),o=n.closest("li"),a=wp.media.frames.file_frame=wp.media({title:$(this).data("uploader_title"),button:{text:$(this).data("uploader_button_text")},library:{type:"video"},multiple:!1}).on("select",function(){var e=a.state().get("selection").first().toJSON(),t=0<$("#auto_draft").length,i=o.find('input[name^="'+d.id+'[title]"]'),i=(!t&&$.trim(i.val())||i.val(e.title),o.find("textarea"));(t||$.trim(i.val()))&&i.val(e.caption),o.find('input[name^="'+d.id+'[url]"]').val(e.url),o.find("textarea").val(e.caption),n.addClass("ptb_uploaded")}).open()})}),window.addEventListener("DOMContentLoaded",function(){$("body").on("change",'.ptb_extra_video_link input[type="checkbox"]',function(){var e=$(this).closest(".ptb_back_active_module_content").find(".ptb_extra_video_permalink");!1!==$(this).prop("checked")?e.slideUp():e.slideDown()}).on("change",'.ptb_extra_video_preview_wrap input[type="checkbox"]',function(){var e=$(this).closest(".ptb_back_active_module_content").find(".ptb_extra_video_permalink, .ptb_extra_video_link");!1===$(this).prop("checked")?e.slideUp():e.not(".ptb_extra_video_permalink").slideDown("slow",function(){$('.ptb_extra_video_link input[type="checkbox"]').trigger("change")})}),$(document).on("PTB.template_load",function(){$('.ptb_extra_video_preview_wrap input[type="checkbox"]').trigger("change")}).on("PTB.template_load",function(){$('.ptb_extra_video_link input[type="checkbox"]:checked').trigger("change")})},{once:!0,passive:!0})}(jQuery);