!function($){"use strict";$(document).on("ptb_metabox_create_progress_bar",function(e){var o=e.container.find("."+e.id+"_option_wrapper"),a=e.container.find("#"+e.id+"_options_wrapper");function r(i){i.preventDefault(),i.data.option.hide("blind",500,function(){$(this).remove()})}$("#"+e.id+"_"+e.options.orientation).prop("checked",!0),o.remove(),$.each(e.options.options,function(i,n){var t=o.clone();t.appendTo(a),t.find('input[name^="'+e.id+'_options_"]').each(function(){var i=(i=$(this).attr("name").replace(e.id+"_options_","")).replace("[]",""),i=n[i]||n.name,t=$.isNumeric(n.id)?n.id:n.id.replace(e.id+"_","");$(this).val(i).attr("id",e.id+"_"+t).data("id",t)}),t.find("."+e.id+"_remove").on("click",{option:t},r)}),a.sortable({placeholder:"ui-state-highlight",handle:".ptb_cmb_option_sort"}),e.container.find("#"+e.id+"_add_new").on("click",{id:e.id,option:o,wrapper:a},function(i){i.preventDefault();var t=i.data.option.clone(),n=function(i){i=$(i.target).closest(".ptb_cmb_input_row").find('input[name^="'+i.data.id+'_options_"]').map(function(){return $(this).data("id")}),i=0===(i=i.filter(function(i){return 0<i})).length?0:Math.max.apply(null,i);return++i}(i);t.find('input[name^="'+i.data.id+'_options_"]').val("").attr("id",i.data.id+"_"+n).data("id",n),t.find("."+i.data.id+"_remove").on("click",{option:t},r),t.appendTo(i.data.wrapper).hide().show("blind",500),i.data.wrapper.sortable("refresh")})}).on("ptb_add_metabox_progress_bar",function(i){return{orientation:"horizonal",options:[{name:"Label 1",id:1,selected:!0},{name:"Label 2",id:2,selected:!1}]}}).on("ptb_metabox_save_progress_bar",function(n){n.options.orientation=$('input[name="'+n.id+'_orientation"]:checked').val(),n.options.options={},$("#"+n.id+"_options_wrapper").children("li").each(function(t){var i=$(this).find("input[name^="+n.id+"_options_]");n.options.options[t]={},i.each(function(){var i=(i=$(this).attr("name").replace(n.id+"_options_","")).replace("[]","");n.options.options[t][i]=$(this).val(),n.options.options[t].id=$(this).attr("id")})})}),window.addEventListener("DOMContentLoaded",function(){$("#ptb_lightbox_container").on("click",'div[data-type="progress_bar"] fieldset legend',function(i){i.preventDefault();i=$(this).next(".ptb_fields_wrapper");i.is(":visible")?i.slideUp():i.slideDown()})},{once:!0,passive:!0})}(jQuery);