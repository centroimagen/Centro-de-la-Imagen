((o,$,r)=>{"use strict";o.body.addEventListener("ptb_lightbox_init",async e=>{const t=e.detail.context,a=$("a.ptb_lightbox",t),i=(0<a.length&&(r.LoadCss(ptb.url+"css/lightbox.css"),await r.loadJs(ptb.url+"js/lightbox.min.js",void 0!==$.fn.magnificPopup),a.on("click",function(e){e.preventDefault(),e.stopPropagation();const t=$(this),a=new URL(t.prop("href")),i=(a.searchParams.set("ptb_lightbox",1),t.hasClass("ptb_lightbox_ajax")?"ajax":"iframe"),s={type:i,mainClass:"standard-frame",iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: 100% !important; height: 100%;"><div role="button" tabindex="0" class="tf_close mfp-close"></div><div class="mfp-iframe-wrapper"><iframe class="mfp-iframe" noresize="noresize" frameborder="0" allowfullscreen></iframe></div></div>'},items:{src:a.href},callbacks:{}};s.callbacks["ajax"==i?"ajaxContentAdded":"open"]=()=>{$(o).trigger("ptb_loaded",!0)},$.magnificPopup.open(s)})),$(".ptb_extra_lightbox .ptb_extra_gallery_item a")),s=$("a.ptb_extra_video_lightbox");(0<i.length||0<s.length)&&(r.LoadCss(ptb.url+"css/lightbox.css"),await r.loadJs(ptb.url+"js/lightbox.min.js",void 0!==$.fn.magnificPopup),i.on("click",function(e){e.preventDefault(),e.stopPropagation();const a=$(this),t={type:"image",gallery:{enabled:!0}},i=[];let s=0;$(this).closest(".ptb_extra_gallery").find("a[data-rel]").each(function(e,t){i.push({src:this.href,title:$(this).find("img").attr("title")}),a.is($(this))&&(s=e)}),t.items=i,$.magnificPopup.open(t,s)}),s.on("click",function(e){e.preventDefault(),e.stopPropagation();const t=$(this),a=t.prop("href"),i={type:"iframe",mainClass:"video-frame",iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: 100% !important; height: 100%;"><div role="button" tabindex="0" class="tf_close mfp-close"></div><div class="mfp-iframe-wrapper"><iframe class="mfp-iframe" noresize="noresize" frameborder="0" allowfullscreen></iframe></div></div>',patterns:{youtu:{index:"youtu.be/",id(e){const t=e.match(/\.be\/(.*)/);return t&&t[1]?t[1]:null},src:"//www.youtube.com/embed/%id%?autoplay=1"},youtube:{index:"youtube.com/",id(e){const t=e.match(/[\\?\\&]v=([^\\?\\&]+)/);return t&&t[1]?t[1]:null},src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id(e){const t=e.match(/(https?:\/\/)?(www.)?(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/);return t&&t[5]?t[5]:null},src:"//player.vimeo.com/video/%id%?autoplay=1"}}},items:{src:a}};$.magnificPopup.open(i)}))})})(document,jQuery,PTB);