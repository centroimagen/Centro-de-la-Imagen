((t,$)=>{"use strict";t.body.addEventListener("ptb_rating_init",function(t){const a=t.detail.context;var t=$(".ptb_extra_rating",a),r="";t.each(function(){var t=$(this).data("hcolor"),a=$(this).data("vcolor"),e="ptb_extra_"+$(this).data("id");$(this).addClass(e),t&&(r+="."+e+":not(.ptb_extra_readonly_rating) > span:hover:before,."+e+":not(.ptb_extra_readonly_rating) > span:hover ~ span:before{color:"+t+";}"),a&&(r+="."+e+" .ptb_extra_voted{color:"+a+";}")}),r&&(r='<style type="text/css">'+r+"</style>",$("body").append(r)),t.not(".ptb_extra_not_vote").children("span").on("click",function(t){t.preventDefault();var r,a,n,o=$(this).closest(".ptb_extra_rating");o.hasClass("ptb_extra_readonly_rating")||(r=o.children("span").length-$(this).index(),t=o.data("post"),a=o.data("key"),n=$(".ptb_extra_rating[data-key='"+a+"'][data-post='"+t+"']"),$.ajax({url:ptb.ajaxurl,dataType:"json",data:{id:t,value:r,key:a,action:"ptb_extra_rate_voted"},type:"POST",beforeSend(){if(o.data("before")){var t=o.data("before").replace(/#rated_value#/gi,r);if(t&&!confirm(t))return!1}n.addClass("ptb_extra_readonly_rating")},success(a){var e,t;a&&a.success&&(e=a.total,n.each(function(){$($(this).children("span").get().reverse()).each(function(t){t<e&&$(this).addClass("ptb_extra_voted")});var t=$(this).next(".ptb_extra_vote_count");0<t.length&&t.html("( "+a.count+" )")}),o.data("after"))&&(t=o.data("after").replace(/#rated_value#/gi,r))&&alert(t)}}))})})})(document,jQuery);