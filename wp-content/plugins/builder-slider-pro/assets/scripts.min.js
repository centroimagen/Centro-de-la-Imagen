(($,d)=>{'use strict';const u=tbLocalScript.addons['pro-slider'],n='1.2.1',p=function(e){e.preventDefault();const t=$(this.closest('.slider-pro')).data('sliderPro'),s='#next-slide'===this.getAttribute('href')?'nextSlide':'previousSlide';'object'==typeof t&&t[s].call(t)},h=(e,t)=>{const i=e.tfClass('bsp_frame')[0];if(e.hasAttribute('data-bg')&&(e.style.backgroundImage='url('+e.dataset.bg+')',e.removeAttribute('data-bg')),i){const a=i.dataset.url,l=d.parseVideo(a),o=document.createElement('iframe');let e='',t='',s=(t='youtube'===l.type?(e='https://www.youtube.com/embed/'+l.id+'?autohide=1&border=0&wmode=opaque','accelerometer;encrypted-media;gyroscope;picture-in-picture'):(e='//player.vimeo.com/video/'+l.id+'?portrait=0&title=0&badge=0','fullscreen'),a.split('?')[1]);const r=!!s&&new URLSearchParams(s);r&&r.get('autoplay')&&(e+='&autoplay=1',t+=';autoplay'),o.className='tf_abs tf_w tf_h sp-video',o.setAttribute('allowfullscreen',''),o.setAttribute('allow',t),o.setAttribute('src',e),i.replaceWith(o)}else{const s=e.tfTag('video')[0];s&&('none'===s.preload?(!0===t.options.autoplay&&!0===t.isTimerRunning&&s.tfOn('ended',()=>{'normal'===t.settings.autoplayDirection?t.nextSlide():'backwards'===t.settings.autoplayDirection&&t.previousSlide()},{passive:!0}),s.tfOn('canplay',function(){this.paused&&this.play()},{passive:!0,once:!0}).setAttribute('preload','metadata'),s.setAttribute('autoplay','autoplay')):s.paused&&s.play())}};d.on('builder_load_module_partial',(e,t)=>{if(!0!==t||e.classList.contains('module-pro-slider')){t=e;const i=d.selectWithParent('module-pro-slider',t);if(0<i.length){const a={button:'bsp-slide-button',excerpt:'bsp-slide-excerpt',image:'sp-slide-image',video:'sp-video',thumbnails:'sp-thumbnail'},l=u.url+'sliderpro/',o=!!$.SliderPro,r=[d.loadJs(u.url+'jquery.sliderPro',o,n,null,!1)];for(let e=i.length-1;-1<e;--e){let s=!1;(d.isTouch&&'yes'===i[e].dataset.touchSwipeMobile||!d.isTouch&&'yes'===i[e].dataset.touchSwipeDesktop)&&(r.push(d.loadJs(l+'touchSwipe',o&&-1!==$.SliderPro.modules.indexOf('TouchSwipe'),n,null,!1)),s=!0);for(let t in a)if(void 0!==i[e].tfClass(a[t])[0]){let e='video'===t?t+'.min':t;r.push(d.loadCss(u.url+'modules/'+e,'bsp_'+t,u.ver)),'video'!==t&&'thumbnails'!==t||(r.push(d.loadJs(l+t,null,n,null,!1)),!0===s&&'thumbnails'===t&&r.push(d.loadJs(l+'thumbnailtouchSwipe',o&&-1!==$.SliderPro.modules.indexOf('ThumbnailTouchSwipe'),n,null,!1)))}}2===i.length&&r.push(d.loadJs(l+'twoSlidesFixer',o&&-1!==$.SliderPro.modules.indexOf('TwoSlidesFixer'),n,null,!1)),Promise.all(r).then(()=>{var t=i;for(let e=t.length-1;-1<e;--e)d.imagesLoad(t[e]).then(e=>{const t=e.dataset.sliderWidth,s=e.dataset.sliderHeight,i=e.dataset.autoplay,a=e.dataset.thumbnailWidth,l=e.dataset.thumbnailHeight,o='1'===e.dataset.pauseLast,r={slideDistance:0,buttons:!e.classList.contains('pager-none')&&!e.classList.contains('pager-type-thumb'),arrows:!0,loop:'1'===e.dataset.loop,responsive:!0,autoHeightOnReize:!0,autoHeight:!1,thumbnailTouchSwipe:!0,thumbnailWidth:a?parseFloat(a):'',thumbnailHeight:l?parseFloat(l):'',timer_bar:'yes'===e.dataset.timerBar,autoplayDelay:i&&'off'!==i?parseFloat(i):5e3,autoplay:'off'!==i,autoScaleLayers:!1,autoplayOnHover:e.dataset.hoverPause,width:t&&'100%'!==t?parseInt(t):'100%',fadeOutPreviousSlide:!1,touchSwipe:d.isTouch&&'yes'===e.dataset.touchSwipeMobile||!d.isTouch&&'yes'===e.dataset.touchSwipeDesktop,gotoSlide(i){i.index===this.slides.length-1&&!0===this.options.autoplay&&o&&!1===this.options.loop&&this.stopAutoplay();for(let s=0;s<2;++s){let e=i.index+s,t=this.getSlideAt(e);(t=t&&t.$slide[0])&&h(t,this)}},init(){h(this.getSlideAt(0).$slide[0],this);const e=this.instance,s=e.tfClass('bsp-slide-button');for(let t=s.length-1;-1<t;--t){let e=s[t].getAttribute('href');'#next-slide'!==e&&'#prev-slide'!==e||s[t].tfOn('click',p)}e.classList.remove('tf_hidden','tf_lazy'),e.classList.add('tf_bsp_ready')}};''===s?r.aspectRatio=1.9:r.height=s,$(e.tfClass('slider-pro')[0]).sliderPro(r)})})}}})})(jQuery,Themify);